# Access8Math feature

## 阅读功能

*	文字内容与数学内容整行阅读
*	互动导航移动缩放
*	互动导航检阅文字
*	简化朗读规则
*	项目与项目间停顿

## 书写功能

*	以 LaTeX/AsciiMath 书写数学内容
*	指令选单输入 LaTeX/AsciiMath 语法
*	快捷手势指令输入 LaTeX/AsciiMath 语法
*	导航光标移动编辑
*	直接阅读含 LaTeX/AsciiMath 文件
*	检视汇出 HTML 文件

# Access8Math 说明

此 NVDA 附加组件提供数学内容的阅读，原先NVDA亦有此功能，但因是调用MathPlayer的功能，部份功能尚显不足，例如未提供或不完整的特定语言翻译、未提供特定语言的互动导航等等。

互动导航可将一个数学内容分段成较小的部份片段进行报读，并透过一系列的键盘按键操作来选择读取的片段和方式，此功能可更好的理解长数学内容结构与项与项之间的层级关系。

此 NVDA 附加组件提供数学内容的书写，透过指令选单，使得在输入 LaTeX/ AsciiMath 语法时无需记忆即可完成输入任务，在完成撰写内容后，可透过检视导出功能将文件制作成可视读之 HTML 文件，透过 HTML 文件可便利的与其他人进行互动讨论。

## 阅读功能

报读：可以串行化文字报读在网页浏览器（Mozilla Firefox, Microsoft Internet Explorer and Google Chrome）上以 MathML 撰写的数学内容或在 Microsoft Word 上以 MathType 撰写的数学对象（需安装 MathType）

互动：在数学对象上按下空白或 enter 可与该数学内容进行互动导航，亦即可部份浏览数学内容中的子内容、在内容间移动、缩放检阅内容片段之大小

分析内容整体的数学意义：将数学内容进行语意分析，符合特定规则时，以该规则进行朗读

分析内容项目的数学意义：在互动导航时会提示该项内容在其上层内容下的意义，例如分数项有两项，在其间移动会报读该项目为分母或分子

项目与项目间停顿：数学内容中各项次间语音可停顿，让阅读者能更快掌握整体数学内容

在数学对象上按空格键可进行操作

*	阅读设定中「当进入互动模式时，显示 Access8Math 互动窗口」勾选会开启「Access8Math 互动窗口」，当系统焦点移至互动按钮时会自动进入互动导航：
	*	互动：进入互动导航
	*	复制：复制数学对象之 MathML 码
*	阅读设定中「当进入互动模式时，显示 Access8Math 互动窗口」无勾选时，则会直接进入互动导航功能：
	*	上下左右键可在内容间移动、缩放检阅内容片段之大小
	数字键盘 1~9 可逐字、逐行阅读串行化文字的数学内容

### 互动导航时按键：

*	向下键：缩小当前数学内容成更小的子内容
*	向上键：放大当前数学内容成更大的子内容
*	向左键：向前一项数学内容
*	向右键：向后一项数学内容
*	Ctrl+c: 复制对象MathML原始码
*	home键：回到最顶层（完整数学内容）
*	数字键盘1-9：使用NVDA 检阅模式阅读数学内容（笔记型键盘方案请参见 NVDA 用户指南的检阅模式相关章节）
*	esc键：退出互动导航模式

### 数学规则

数学结构分析规则：此类规则是为了提高常用数学结构的阅读体验而设计，例如：「x^2」将报读为「x 的平方」而非「x 上标 2」

简化朗读规则：简化朗读规则是各种规则的简化版，当其内容仅为单一项目时，便可省略前后标记朗读，以达到更好的理解与阅读，而亦不致造成混淆，例如：「\frac{1}{2}」将报读为「2 分之 1」而非「分数 2 分之 1 结束分数」

## 书写功能

书写综合内容（文字内容与数学内容）

### 书写综合内容（已下快捷键功能在编辑区可用，建议使用记事本）

以 LaTeX 或 AsciiMath 分隔标记框出数学标记区，用以区分文字内容与数学内容，亦即在数学标记区内的数据为 LaTeX/AsciiMath 语法的数学内容，在数学标记区外的为文字内容。

*	LaTeX 分隔标记：（可于阅读设定中选择使用括号或钱号）
	*	开始分隔标记：「\(」 或 「$」
	*	结束分隔标记：「\)」 或 「$」
*	AsciiMath 分隔标记：
	*	开始分隔标记：「`」
	*	结束分隔标记：「`」

### 指令手势（开关：NVDA+alt+c）

alt+m：弹出标记指令窗口，选择 LaTeX/AsciiMath 按下 enter 键即会在当前所选文字前后（无选择文字时为当前光标处）加入 LaTeX/AsciiMath 标记并会自动将光标移入其内，以快速输入内容。

alt+l：弹出 LaTeX 指令窗口，选择要加入的 LaTeX 指令项目按下 enter 键即会在当前光标处加入对应的 LaTeX 语法并会自动将光标移入适当输入点，以快速输入内容。

LaTeX 指令窗口

*	选到任意 LaTeX 指令项目按下英文字母(a~z)或 f1~f12 设定快捷
*	选到任意 LaTeX 指令项目按下 d 移除已设定的快捷
*	选到任意 LaTeX 指令项目按下 enter 在当前光标处加入对应的 LaTeX 语法

alt+i：光标停在数学区块上时，可与该数学区块进行互动导航

alt+h：可转换出文字数据与数学数据的 HTML 文件并可进行检视或汇出。其中数学区块之内容汇转成 MathML 并与文字并列呈现，以利视觉阅读。

*	检视：透过系统设定的默认开启 .HTML 扩展名应用程序打开转换后的 HTML 文件。
*	汇出：将转换后的 HTML 文件与原始文本文件打包储存为一压缩文件。

在书写设定内可选择启动时是否启用指令手势，编辑区中按 NVDA+alt+c 可启用或停用指令手势，可于输入手势中变更。

### 书写区块导航手势（开关：NVDA+alt+n）

*	alt+向左键：移动到上一个数据区块的开始点
*	alt+向下键：不移动仅读出当前数据区块的内容
*	alt+向右键：移动到下一个数据区块的开始点
*	alt+home：移动到当前数据区块的开始点
*	alt+end：移动到当前资料区块的结束点
*	alt+shift+向左键：移动到上一个数据区块并选取
*	alt+shift+向下键：不移动仅选取当前数据区块的内容
*	alt+shift+向右键：移动到下一个数据区块并选取

在书写设定内可选择启动时是否启用区块导航手势，编辑区中按 NVDA+alt+n 可启用或停用区块导航手势，可于输入手势中变更。

### 快捷手势（开关：NVDA+alt+s）

当快捷手势启用时按 f1~f12 可快速插入  LaTeX 语法。当快捷手势启用时按 shift+f1~f12 可读出该快捷当下绑定的 LaTeX 语法。（需先于指令选单中设定快捷键）

在阅读设定内可选择启动时是否启用快捷导航手势，编辑区中按 NVDA+alt+s 可启用或停用快捷导航手势，可于输入手势中变更。

### 希臘字母手勢（開關：NVDA+alt+g）

當游標在 LaTeX 區塊時，按字母可快速插入對應的希臘字母 LaTeX 語法。

對照表：

|英文字母|希臘字母|LaTeX|
|-|-|-|
|a|α|\alpha|
|b|β|\beta|
|c|θ|\theta|
|d|δ|\delta|
|e|ε|\epsilon|
|f|φ|\phi|
|g|γ|\gamma|
|h|η|\eta|
|i|ι|\iota|
|k|κ|\kappa|
|l|λ|\lambda|
|m|μ|\mu|
|n|ν|\nu|
|o|ο|\omicron|
|p|π|\pi|
|r|ρ|\rho|
|s|σ|\sigma|
|t|τ|\tau|
|u|υ|\upsilon|
|v|φ|\psi|
|w|ω|\omega|
|y|ξ|\xi|
|x|χ|\chi|
|z|ζ|\zeta|

### 浏览导航模式（开关：NVDA+space）

当浏览导航模式开启下光标移动报读出的数学数据区块会读出数学文字化内容而非原始语法数据

可用以下按键手势移动编辑光标与互动导航

*	向左键：移动到上一个数据区块的开始点并读出
*	向右键：移动到下一个数据区块的开始点并读出
*	向上键：移动到上一行并读出该行所有数据区块的内容
*	向下键：移动到下一行并读出该行所有数据区块的内容
*	pageUp：往上移动十行并读出该行所有数据区块的内容
*	pageDown：往下移动十行并读出该行所有数据区块的内容
*	home：移动到光标所在行的第一个区块
*	end：移动到光标所在行的最后一个区块

以上光标移动按键加上 shift 键则会一并选取文字

space/enter：光标停在数学区块上时可与该数据区块数学内容互动导航

下列的字母，若单独按，编辑光标会跳转到其对应的后一个区域位置，若同时按 shift + 相应字母，编辑光标会跳转到前一个区域位置：

*	l: 移到下一个 LaTeX 资料区块并读出
*	a: 移到下一个 AsciiMath 资料区块并读出
*	m: 移到下一个 MathML 资料区块并读出
*	t: 移到下一个文本块并读出
*	tab: 移动到下一个可互动区块（数学区块）并读出

可用以下按键手势编修文件

*	ctrl+x：剪下当前游标区块
*	ctrl+c：复制当前游标区块
*	ctrl+v：于当前游标区块后贴上内容
*	delete/back space：删除当前游标区块

### 综合内容范例：

*	一元二次方程式 \(ax^2+bx+c=0\) 的解为 \(x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}\) 。
*	一元二次方程式 $ax^2+bx+c=0$ 的解为 $x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}$ 。
*	一元二次方程式 `ax^2+bx+c=0` 的解为 `x=(-b+- \sqrt(b^2-4ac))/(2a)` 。

## 设定

所有 Access8Math 的设定集中于工具->Access8Math->设定选单中

### 阅读设定

*	语言：Access8Math 朗读数学内容的语言
*	语音来源：选择使用 Access8Math 或 Math Player 的语音朗读方式
*	点字来源：选择使用 Access8Math 或 Math Player 的点字显示方式
*	互动来源：选择使用 Access8Math 或 Math Player 的互动导航方式
*	分析内容的数学意义：将数学内容进行语意分析，符合特定规则时，套用该规则的语音朗读与点字显示
*	当进入互动模式时，显⽰互动窗口：在数学对象上启动事件进入互动导航模式前是否显示「Access8Math 互动窗口」。
*	在互动导航模式下读出字典预先定义的意义：在互动导航模式下，当字典文件有定义时，使用字典文件读出提示该项子内容在其上层子内容的意义
*	在互动导航模式下读出⾃动产⽣的意义：在互动导航模式下，当字典文件无定义或不完整时，使用自动产生功能读出提示该项子内容在其上层子内容的意义或项次
*	在互动导航下使⽤⾳效来提⽰无法移动：在互动模式下导航时，当无法在移动时发出提示音，如未勾选将以语音「无移动」提示
*	项目间隔时间：设定数学内容项目与项目间报读停顿的时间，数值从1到100，数值愈小表示停顿时间愈短，反之数值愈大表示停顿时间愈长。

### 书写设定

*	启动时启⽤指令⼿势
*	启动时启⽤区块导航⼿势
*	启动时启⽤快捷⼿势
*	以⾳效提⽰书写导航模式的切换
*	HTML 显⽰
*	LaTeX 分隔符

### 规则设定：选择特定规则是否启用的设定。

## 本地化

工具->Access8Math->本地化选单中可自定议语音朗读与点字显示，语音朗读与点字显示内皆分为「unicode 字点」与「数学规则」两部份

*	语音 unicode 字典：可客制设定各项符号文字的语音朗读
*	语音数学规则：可客制设定各数学类型的语音朗读
*	点字 unicode 字典：可客制设定各项符号文字的点字显示
*	点字数学规则：可客制设定各数学类型的点字显示
*	「加入新语言」可加入原先于内建未提供的语言，加入后于一般设定内会多出刚新增的语系并可再透过「unicode 字典」与「数学规则」定义读法达到多国语言客制化设定

### unicode 字典编辑

Access8Math 透过字典文件方式将特定符号对应到特定文字／点字，以解决部份罕见符号语音合成器不支持、复合多个符号为一个数学符号（sin 为正弦）、或因部份符号通用性问题在数学上与一般使用上有所不同（! 为阶层）等问题

新增：增加一组对应字典文件纪录，按下后可输入欲新增的符号，按确认后即可在字典文件纪录列表上看到新增的符号

修改选择符号：选择一笔字典文件纪录并在替换文字输入值后，未来 Access8Math 看到此符号后即会对应以替换文字朗读此符号

移除：选择一笔字典文件纪录后按下移除按钮可删除选定的字典文件纪录

还原默认值：将字典文件列表还原到初始默认值。

汇入：将字典文件档案汇入，可用于加载字典文件档案。

汇出：将字典文件档案储存于指定路径，以利分享或保存字典文件档案。

### 数学规则编辑

Access8Math将常用数学式依据类型与逻辑，建立46项数学规则，程序依据这套规则判别数学式的念法与念读顺序，依据各地习惯不同，可以变更数学念读顺序与念法，方法如下：

编辑: 进入"数学规则"后，窗口内有数学规则列表，选则任一规则可选择"编辑按钮"进入编辑条目。

规则的"编辑条目"可分为两大区块，分别是串行化顺序与子节点角色。
	*	串行化顺序：将数学规则依据念读顺序划分多个区块，在此区域可变更规则子项目的念读顺序及开始、项目间与结束的分隔文字，以分数规则mfrac为例，此规则分为五个念读顺序，顺序0、2和4分别代表起始提示、项目区隔提示与结束提示，可在各字段中输入变更自己习惯的念法，而顺序1与3则可调整子节点念读的先后，可于下拉式选单中变更顺序。
	*	子节点角色：为该数学规则的下一阶层子项目，以分数规则mfrac为例，此项规则就包含分子与分母两项，而在子节点字段中，可以变更该项子内容在其上层子内容的意义文字，。

范例：可先行查阅确认编辑修改后对此类型的数学规则读法。点击后会出现一个预设好符合该对应数学规则的数学内容，供确认对此类型的数学规则读法是否符合预期。

还原默认值：将数学规则列表还原到初始默认值。

汇入：将数学规则档案汇入，可用于加载数学规则档案。

汇出：将数学规则档案储存于指定路径，以利分享或保存数学规则档案。

## 范例

维基百科上的数学内容皆以 MathML 写成

*	一元二次方程式：https://zh.wikipedia.org/wiki/一元二次方程
*	矩阵乘法：https://zh.wikipedia.org/zh-tw/%E7%9F%A9%E9%99%A3%E4%B9%98%E6%B3%95
*	三次方程式：https://zh.wikipedia.org/zh-tw/%E4%B8%89%E6%AC%A1%E6%96%B9%E7%A8%8B

一元二次方程解：

*	LaTeX: \(x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}\)
*	AsciiMath: `x=(-b+- \sqrt(b^2-4ac))/(2a)`
*	MathML: <math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mo>-</mo><mi>b</mi><mo>&#xB1;</mo><msqrt><msup><mi>b</mi><mn>2</mn></msup><mo>-</mo><mn>4</mn><mi>a</mi><mi>c</mi></msqrt></mrow><mrow><mn>2</mn><mi>a</mi></mrow></mfrac></math>

github： https://github.com/tsengwoody/Access8Math

欢迎提出见意与 bug 反馈，谢谢！

本插件简体中文本地化由 Eureka <manchen_0528@outlook.com> 维护，有任何与简体中文本地化相关的问题可联系。

## Access8Math v3.2 更新日志

*	新增可使用「`」来分隔数据区块，「`」括起来的区块为 AsciiMath 数据
*	新增浏览导航模式编辑快捷键 - 剪下(ctrl+x)、复制(ctrl+c)、贴上(ctrl+v)、删除(delete/back space)
*	新增浏览导航模式移动快捷键 - 在可互动之数据区块间移动(tab)、在 AsciiMath 数据区块间移动(a)
*	调整浏览导航模式移动快捷键 - 上下左右键移动光标方式并读出移动后数据区块内容
*	浏览导航模式光标移动时，数学数据区块会读出数学文字化内容而非原始语法
*	浏览导航模式光标停在数学数据区块上时可按下 space 或 enter 键与该数学数据区块互动导航
*	新增英文字母为可设定之快捷按键
*	新增希腊字母快捷手势
*	快捷按键输入键仅在 LaTeX 区有效
*	可设定以音效或语音提示浏览导航模式的切换
*	LaTeX 指令选单在文字区时可开启并在插入时加上 LaTeX 分隔符
*	新增转译选单，可将光标所停留在的区块 LaTeX/AsciiMath 数据格式互转。属于命令手势组，当光标停留在 LaTeX/AsciiMath 区块时，按下 alt+t 可开启转译选单（在浏览导航模式下为 ctrl+t）
*	新增批次选单，可将整份文件 LaTeX/AsciiMath 数据格式互转、可将 LaTeX 分隔符在括号与钱号间转译。属于命令手势组，按下 alt+b 可开启批次选单
*	新增 MathML 区块类型，支持 alt+i，书写导航模式下直接报读与单键 m, tab 移动
*	新增点字自定义义数学规则与 unicode 字典，与语音相同
*	导出的 HTML 可呈现 markdown 语法

## Access8Math v3.1 更新日誌

*	HTML 窗口改用虚拟窗口呈现
*	修正当文件中包含「`」时无法正常转 HTML 预览
*	修正当文件字数大于 4096 时无法转 HTML 预览
*	新增常用集合 LaTeX 指令
*	更新 alt+m 在当前所选文字前后（无选择文字时为当前光标处）插入「\(」、「\)」 LaTeX 标记
*	在常规设置中可选择导出的 HTML 中数学内容是否在独立一行呈现
*	导出 HTML 时将原始文本文件一并保存到压缩包内
*	在常规设置中可选择用括号或美元符号作为 LaTeX 分隔符
*	在常规设置中可选择语音、盲文和交互的来源（Access8Math 或 Math Player）
*	可通过手势启用或禁用书写手势、区域导航手势、快捷手势
*	可通过手势切换语音、盲文、交互的来源（Access8Math 或 Math Player）

## Access8Math v3.0 更新日志

*	以 LaTeX 书写数学内容
*	以 AsciiMath 书写数学内容
*	书写综合内容（文字内容与数学内容）
*	在编辑区内容以快捷键移动光标至不同类型区域
*	在编辑区内容使用命令菜单选择命令
*	在 LaTeX 命令菜单设置快捷键
*	在编辑区内预览和导出内容为 HTML

## Access8Math v2.6 更新日志

*	开启互动窗口后会自动进入互动模式
*	可以选择在互动模式下如何提示「无移动」的方式：提示音或语音「无移动」两种，在阅读设定内有多一个「使用提示音来警告无移动」的选项
*	无移动时会再重复报读一次当前项的内容

## Access8Math v2.5 更新日志

*	加入俄语的翻译，感谢 Futyn-Maker 的翻译工作
*	修正复合符号翻译失败的问题
*	移除在 en unicode.dic 内重复的小写字母并加入大写字母(0370~03FF)

## Access8Math v2.4 更新日志

*	修正已知问题

## Access8Math v2.3 更新日志

*	相容于 Python3
*	重构模块与修正程序代码风格
*	加入单符号向量规则

## Access8Math v2.2 更新日志

*	修政单一节点有多字符时无法正确报读
*	修政设定窗口的兼容性问题，可兼容 NVDA 2019.2，感谢 CyrilleB79 的 pull requests 
*	修政 unicode 有重复符号时的处理
*	加入法语的翻译，感谢 CyrilleB79 的翻译工作
*	新增与修政部份接口快捷键设定

## Access8Math v2.1 更新日志

*	在「阅读设定」中，可设定进入互动模式时，是否一并自动显示「Access8Math 互动窗口」
*	在互动模式中，当无显示互动窗口时，可透过 ctrl+m 来手动显示互动窗口
*	修政多国语言切换问题
*	加入土耳其语的翻译，感谢 Cagri(Çağrı Doğan) 的翻译工作
*	兼容性更新，针对 NVDA 2019.1 对附加组件 manifest 标示的检查
*	重构对话窗口原始码

## Access8Math v2.0 更新日志

*	加入多国语系新增与客制化设定功能，新增三个窗口「unicode 字典」、「数学规则」、「加入新语言」
*	unicode 字典可客制设定各项符号文字的报读方式。
*	数学规则可客制设定各数学类型的报读方式并可于修改完成前透过范例的按钮先行查阅修改的效果。
*	加入新语言可加入原先于内建未提供的语言，加入后于阅读设定内会多出刚新增的语系并可再透过「unicode 字典」与「数学规则」定义读法达到多国语言客制化设定
*	优化在互动模式下，可使用数字键7~9以行为单位阅读序列文字

## Access8Math v1.5 更新日志

*	在「阅读设定」新增项与项间停顿时间设定。数值从1到100，数值愈小表示停顿时间愈短，反之数值愈大表示停顿时间愈长。
*	更新 unicode.dic

## Access8Math v1.4 更新日志

*	调整设定选项对话框，分为「阅读设定」、「规则设定」对话框。「阅读设定」为原先「Access8Math 设定」对话框，「规则设定」对话框则为可选择特定规则是否启用的设定。
*	新规则
	*	向量规则：当两个Identifier的正上方有「⇀」时，将其项读为「向量……」
	*	弧度规则：当两个Identifier的正上方有「⌢」时，将其项读为「弧……」
*	修正已知问题

## Access8Math v1.3 更新日志

*	新规则
	*	正规则：当「+」在首项或其前项为<mo></mo>标记时，将「+」读为「正」而非「加」
	*	平方规则：当次方数为2时，将其读为「…的平方」
	*	立方规则：当次方数为3时，将其项读为「…的立方」
	*	直线规则：当两个Identifier的正上方有「↔」时，将其项读为「直线……」
	*	线段规则：当两个Identifier的正上方有「¯」时，将其项读为「线段……」
	*	射线规则：当两个Identifier的正上方有「→」时，将其项读为「射线……」
*	新增互动窗口：在数学内容上按空格键后开启「Access8Math 互动窗口」，窗口内含有「互动」、「复制」按钮。
	*	互动：进入数学内容导航浏览
	*	复制：复制对象MathML原始码
*	多国语言新增 zh_CN 的语言
*	调整规则间继承关系，确保规则冲突时，能正确使用适合的规则
*	修正已知问题

## Access8Math v1.2 更新日志

*	新规则
	*	负规则：当「-」在首项或其前项为<mo></mo>标记时，将「-」读为「负」而非「减」
	*	带分数：当分数前项为数字时，将数字与分数间读为「又」
*	程序架构优化
	*	加入「sibling」的类别
	*	加入动态产生「反向」 nodetype的类别
*	修正已知问题

## Access8Math v1.1 更新日志

*	在导航浏览时按"Ctrl+c"复制对象MathML原始码
*	再偏好设定内增加 Access8Math 设定的项目，设定选项对话框，可设定：
	*	语言：Access8Math 朗读数学内容的语言
	*	分析内容的数学意义：将数学内容进行语意分析，符合特定规则时，以该规则的数学意义进行朗读
	*	读出字典有定义模式的意义：当字典文件有定义时，使用字典文件读出提示该项子内容在其上层子内容的意义
	*	读出自动生成的意义：当字典文件无定义或不完整时，使用自动产生功能读出提示该项子内容在其上层子内容的意义或项次
*	加入多条简单规则，简单规则是各种规则的简化版，当其内容仅为单一项目时，便可省略前后标记朗读，以达到更好的理解与阅读，而亦不致造成混淆
*	更新unicode.dic
*	修正已知问题
